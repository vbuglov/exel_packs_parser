{"ast":null,"code":"import _toConsumableArray from \"/home/vyc/Documents/packparcerwithcalcs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { cond, drop, includes, T } from \"ramda\";\nimport { prepData, calcs, pack } from \"./exelParser\";\nimport { lib } from \"./data\";\n\nvar withoutNums = function withoutNums(v) {\n  return \"\".concat(v).replace(/[0-9]/gm, \"\");\n};\n\nvar getVFromPack = function getVFromPack(v) {\n  var index = pack()[0].findIndex(function (el) {\n    return el === withoutNums(v);\n  });\n  return pack()[2][index];\n};\n\nvar getVFromLib = function getVFromLib(v) {\n  var splitted = v.replace(/\\$/gm, \"\").split(\".\");\n  splitted = [splitted[0]].concat(_toConsumableArray(splitted[1].replace(/[0-9]+/gm, function (v) {\n    return \"__break__\".concat(v);\n  }).split(\"__break__\")));\n  var book = lib[splitted[0]];\n  var colIndex = book[0].findIndex(function (el) {\n    return el === splitted[1];\n  });\n  var row = book[+splitted[2] + 1].filter(function (el) {\n    return el;\n  });\n  return v;\n};\n\nvar prepItem = function prepItem(v) {\n  return cond([[function () {\n    return includes(\"$\", v) && includes(\".\", v);\n  }, function () {\n    return getVFromLib(v);\n  }], [function () {\n    return pack()[0].includes(withoutNums(v));\n  }, function () {\n    return getVFromPack(v);\n  }], [T, function () {\n    return v;\n  }]])(v);\n};\n\nvar prepSplitted = function prepSplitted() {\n  var arr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return arr.map(function (el) {\n    return prepItem(el);\n  });\n};\n\nvar prepParamValue = function prepParamValue() {\n  var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var splittedStr = value.replace(/\\(|\\/|\\*|\\-|\\)/gm, function (v) {\n    return \"__break__\".concat(v, \"__break__\");\n  }).split(\"__break__\").filter(function (el) {\n    return el;\n  }); // console.log(prepSplitted(splittedStr));\n\n  prepSplitted(splittedStr);\n  return prepSplitted(splittedStr).join(\"\");\n};\n\nvar calcsParser = function calcsParser() {\n  // console.log(calcs());\n  // console.log(pack());\n  // console.log(lib);\n  var cols = calcs()[0];\n  var calcsKeys = calcs()[1];\n  var calcsValues = calcs()[2]; // return `calcs: [%{paramName: \"a\", paramValue: \"22\"}]`;\n\n  return \"calcs: [\".concat(calcsKeys.map(function (el, idx) {\n    return \"%{paramName: \\\"\".concat(el, \"\\\", paramValue: \\\"\").concat(prepParamValue(calcsValues[idx]), \"\\\"},\\n\");\n  }), \"]\");\n};\n\nexport default calcsParser;","map":{"version":3,"sources":["/home/vyc/Documents/packparcerwithcalcs/src/parseExlsPacks/calcsParser.js"],"names":["cond","drop","includes","T","prepData","calcs","pack","lib","withoutNums","v","replace","getVFromPack","index","findIndex","el","getVFromLib","splitted","split","book","colIndex","row","filter","prepItem","prepSplitted","arr","map","prepParamValue","value","splittedStr","join","calcsParser","cols","calcsKeys","calcsValues","idx"],"mappings":"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","sourcesContent":["import { cond, drop, includes, T } from \"ramda\";\nimport { prepData, calcs, pack } from \"./exelParser\";\nimport { lib } from \"./data\";\n\nconst withoutNums = (v) => `${v}`.replace(/[0-9]/gm, \"\");\nconst getVFromPack = (v) => {\n  const index = pack()[0].findIndex((el) => el === withoutNums(v));\n  return pack()[2][index];\n};\n\nconst getVFromLib = (v) => {\n  let splitted = v.replace(/\\$/gm, \"\").split(\".\");\n  splitted = [\n    splitted[0],\n    ...splitted[1]\n      .replace(/[0-9]+/gm, (v) => {\n        return `__break__${v}`;\n      })\n      .split(\"__break__\"),\n  ];\n  const book = lib[splitted[0]];\n  const colIndex = book[0].findIndex((el) => el === splitted[1]);\n  const row = book[+splitted[2] + 1].filter((el) => el);\n  return v;\n};\n\nconst prepItem = (v) => {\n  return cond([\n    [() => includes(\"$\", v) && includes(\".\", v), () => getVFromLib(v)],\n    [() => pack()[0].includes(withoutNums(v)), () => getVFromPack(v)],\n    [T, () => v],\n  ])(v);\n};\n\nconst prepSplitted = (arr = []) => arr.map((el) => prepItem(el));\n\nconst prepParamValue = (value = \"\") => {\n  const splittedStr = value\n    .replace(/\\(|\\/|\\*|\\-|\\)/gm, (v) => {\n      return `__break__${v}__break__`;\n    })\n    .split(\"__break__\")\n    .filter((el) => el);\n  // console.log(prepSplitted(splittedStr));\n  prepSplitted(splittedStr);\n  return prepSplitted(splittedStr).join(\"\");\n};\n\nconst calcsParser = () => {\n  // console.log(calcs());\n  // console.log(pack());\n  // console.log(lib);\n  const cols = calcs()[0];\n  const calcsKeys = calcs()[1];\n  const calcsValues = calcs()[2];\n  // return `calcs: [%{paramName: \"a\", paramValue: \"22\"}]`;\n  return `calcs: [${calcsKeys.map(\n    (el, idx) =>\n      `%{paramName: \"${el}\", paramValue: \"${prepParamValue(\n        calcsValues[idx]\n      )}\"},\\n`\n  )}]`;\n};\n\nexport default calcsParser;\n"]},"metadata":{},"sourceType":"module"}